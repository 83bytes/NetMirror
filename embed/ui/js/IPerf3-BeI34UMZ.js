var e=(e,t,r)=>new Promise((a,l)=>{var s=e=>{try{o(r.next(e))}catch(t){l(t)}},n=e=>{try{o(r.throw(e))}catch(t){l(t)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,n);o((r=r.apply(e,t)).next())});import{v as t,x as r,z as a,r as l,p as s,O as n,H as o,u as i,P as d,G as c,V as u,d as v,J as m,o as g,C as p,B as f,I as y,D as b,X as x,y as h}from"./vendor-vue-CxubmH21.js";import{u as w}from"./vendor-ui-Xy_LgOPl.js";import{b as k,u as I,r as j,a as S}from"./index-Dixfr0TL.js";/* empty css              */import{x as _,a as C}from"./vendor-terminal-D77O7lnw.js";import{r as P,a as E}from"./ServerIcon-BaaHcScl.js";import"./vendor-utils-DBvwmA_a.js";import"./vendor-charts-JXtrNU4K.js";function B(e,l){return r(),t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}const A={__name:"Copy",props:{value:String,text:Boolean,hideMessage:Boolean},setup(a){const u=a,v=l(!1),m=l();w(m,{initial:{scale:1},tap:{scale:.9}});const g=t=>e(this,null,function*(){try{yield navigator.clipboard.writeText(t)}catch(e){const r=document.createElement("textarea");document.body.appendChild(r),r.textContent=t,r.select(),null==document||document.execCommand("copy"),r.remove()}v.value=!0,setTimeout(()=>{v.value=!1},2e3)});return(e,a)=>(r(),t("button",{ref_key:"buttonRef",ref:m,onClick:a[0]||(a[0]=e=>g(u.value)),class:c(["inline-flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 group",{"bg-green-100 dark:bg-green-900/30":v.value}])},[s(d,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-75","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-75"},{default:n(()=>[v.value?(r(),o(i(B),{key:0,class:"w-4 h-4 text-green-600 dark:text-green-400"})):(r(),o(i(k),{key:1,class:"w-4 h-4 text-gray-600 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300"}))]),_:1})],2))}},M={class:"space-y-6"},T={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700"},$={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},L={class:"flex items-center space-x-4"},F={class:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl"},R={key:0,class:"mt-6"},z={class:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},J={class:"flex items-center"},q={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"},D={class:"space-y-3"},G={key:0,class:"bg-white dark:bg-gray-800 rounded-lg p-3"},H={class:"flex items-center justify-between"},N={class:"truncate"},O={class:"text-sm font-mono text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},U={key:1,class:"bg-white dark:bg-gray-800 rounded-lg p-3"},V={class:"flex items-center justify-between"},W={class:"truncate"},X={class:"text-sm font-mono text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},K={class:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-lg"},Q={__name:"IPerf3",setup(k){const B=I(),Q=l(!1),Y=l(0),Z=l(60),ee=l(0),te=l(0);let re=null;const ae=new _.Terminal({theme:{background:"#1f2937",foreground:"#f9fafb",cursor:"#3b82f6"},fontFamily:"JetBrains Mono, Consolas, Monaco, monospace",fontSize:14,cursorBlink:!0,scrollback:1e3}),le=l(),se=new C.FitAddon,ne=l(),{apply:oe}=w(ne,{initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{duration:300}}}),ie=e=>{Y.value=parseInt(e.data),ce()},de=e=>{se.fit();e.data.split("\n").forEach(e=>{e.trim()&&ae.writeln(e)})},ce=()=>{te.value=0,ee.value=0,re=setInterval(()=>{te.value+=1,ee.value=te.value/Z.value*100,(te.value>=Z.value||!Q.value)&&clearInterval(re)},1e3)};let ue=u(new AbortController);const ve=()=>e(this,null,function*(){Q.value=!0,ae.clear(),Y.value=0,ae.writeln("[1;33mStarting IPerf3 server...[0m"),ue=new AbortController,B.source.addEventListener("Iperf3",ie),B.source.addEventListener("Iperf3Stream",de);try{yield B.requestMethod("iperf3/server",{},ue.signal)}catch(e){"AbortError"!==e.name&&ae.writeln("[1;31mError: Failed to start server[0m")}Q.value=!1,ee.value=0,te.value=0,clearInterval(re)}),me=()=>{B.source.removeEventListener("Iperf3",ie),B.source.removeEventListener("Iperf3Stream",de),ue.abort("User stopped"),ae.writeln("\r\n[1;31mIPerf3 Server stopped by user[0m")};return v(()=>{ae.loadAddon(se),ae.open(m(le.value)),se.fit(),oe(),ae.writeln("[1;32mWelcome to the IPerf3 Server Terminal[0m"),ae.writeln('[90mClick "Start Server" to begin...[0m'),ae.writeln("")}),g(()=>{me()}),(e,l)=>(r(),t("div",M,[a("div",T,[a("div",$,[a("div",L,[a("div",F,[s(i(P),{class:"w-6 h-6 text-white"})]),l[1]||(l[1]=a("div",null,[a("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"IPerf3 Server"),a("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Network bandwidth measurement tool")],-1))]),a("button",{onClick:l[0]||(l[0]=e=>Q.value?me():ve()),class:c(["inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-200",Q.value?"bg-red-500 hover:bg-red-600 text-white":"bg-primary-500 hover:bg-primary-600 text-white hover:shadow-lg"])},[(r(),o(y(Q.value?i(j):i(S)),{class:"w-5 h-5 mr-2"})),f(" "+b(Q.value?"Stop Server":"Start Server"),1)],2)]),Q.value&&Y.value?(r(),t("div",R,[a("div",z,[a("span",J,[s(i(E),{class:"w-4 h-4 mr-1.5"}),l[2]||(l[2]=f(" Session timeout ",-1))]),a("span",null,b(Math.ceil(Z.value.value-te.value.value))+"s remaining",1)]),a("div",q,[a("div",{class:"bg-gradient-to-r from-yellow-400 to-orange-500 h-2.5 rounded-full transition-all duration-1000",style:x({width:`${ee.value.value}%`})},null,4)])])):p("",!0)]),s(d,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0"},{default:n(()=>[Q.value&&Y.value?(r(),t("div",{key:0,ref_key:"cardRef",ref:ne,class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6"},[l[5]||(l[5]=a("h4",{class:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4"},"Connection Commands",-1)),a("div",D,[i(B).config.public_ipv4?(r(),t("div",G,[a("div",H,[a("div",N,[l[3]||(l[3]=a("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"IPv4",-1)),a("code",O," iperf3 -c "+b(i(B).config.public_ipv4)+" -p "+b(Y.value),1)]),s(A,{value:`iperf3 -c ${i(B).config.public_ipv4} -p ${Y.value}`},null,8,["value"])])])):p("",!0),i(B).config.public_ipv6?(r(),t("div",U,[a("div",V,[a("div",W,[l[4]||(l[4]=a("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"IPv6",-1)),a("code",X," iperf3 -c "+b(i(B).config.public_ipv6)+" -p "+b(Y.value),1)]),s(A,{value:`iperf3 -c ${i(B).config.public_ipv6} -p ${Y.value}`},null,8,["value"])])])):p("",!0)])],512)):p("",!0)]),_:1}),a("div",K,[l[6]||(l[6]=h('<div class="flex items-center justify-between px-4 py-2 bg-gray-800 border-b border-gray-700"><div class="flex items-center space-x-2"><div class="w-3 h-3 bg-red-500 rounded-full"></div><div class="w-3 h-3 bg-yellow-500 rounded-full"></div><div class="w-3 h-3 bg-green-500 rounded-full"></div></div><span class="text-sm font-medium text-gray-300">IPerf3 Terminal</span><div class="w-16"></div></div>',1)),a("div",{ref_key:"terminalRef",ref:le,class:"h-96 p-4"},null,512)])]))}};export{Q as default};
