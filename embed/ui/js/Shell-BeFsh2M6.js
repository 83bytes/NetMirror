import{u as e}from"./vendor-ui-Xy_LgOPl.js";import{e as t,u as r}from"./index-Dixfr0TL.js";/* empty css              */import{a as n,x as o}from"./vendor-terminal-D77O7lnw.js";import{r as s,d as a,J as l,o as i,v as d,x as c,z as m,p as f,u,G as b,D as v,C as g}from"./vendor-vue-CxubmH21.js";import"./vendor-utils-DBvwmA_a.js";import"./vendor-charts-JXtrNU4K.js";const h={class:"flex items-center justify-between p-3 bg-gray-800 border-b border-gray-700 flex-shrink-0"},p={class:"flex items-center space-x-2 text-sm text-gray-300"},w={class:"flex items-center space-x-2"},y={class:"text-xs text-gray-400"},x={class:"flex-1 bg-gray-900 relative overflow-hidden"},k={key:0,class:"absolute inset-0 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center"},S={class:"text-center"},C={class:"text-white font-medium"},j={class:"px-4 py-1.5 bg-gray-800 border-t border-gray-700 flex-shrink-0"},E={class:"flex items-center justify-between text-xs text-gray-400"},L={key:0},W={__name:"Shell",emits:["closed"],setup(W,{emit:T}){const B=T,M=s(),A=s(),F=new n.FitAddon,z=s(!1),D=s("Connecting...");let I,R,_=[];const{apply:P}=e(A,{initial:{opacity:0,scale:.95},enter:{opacity:1,scale:1,transition:{duration:300}}}),$=()=>{_.length>0&&J.write(new Uint8Array(_.shift()),()=>{$()})},G=()=>{clearTimeout(R),R=setTimeout(()=>{F.fit(),I&&I.readyState===WebSocket.OPEN&&I.send((new TextEncoder).encode("2"+J.rows+";"+J.cols))},100)},J=new o.Terminal({theme:{background:"#111827",foreground:"#d1d5db",cursor:"#60a5fa",cursorAccent:"#1e40af",selectionBackground:"#374151",black:"#111827",red:"#ef4444",green:"#22c55e",yellow:"#f59e0b",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#f9fafb",brightBlack:"#4b5563",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#fbbf24",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#ffffff"},fontFamily:'JetBrains Mono, SF Mono, Monaco, Inconsolata, "Fira Code", "Fira Mono", "Droid Sans Mono", Consolas, "Source Code Pro", monospace',fontSize:14,fontWeight:400,fontWeightBold:700,lineHeight:1.4,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,tabStopWidth:4});return a(()=>{J.loadAddon(F),J.open(l(M.value)),F.fit(),P(),(()=>{const e=new URL(location.href),t=`${"https:"===e.protocol?"wss:":"ws:"}//${e.host}/session/${r().sessionId}/shell`;I=new WebSocket(t),I.binaryType="arraybuffer",I.addEventListener("open",()=>{z.value=!0,D.value="Connected",J.clear(),J.writeln("[1;32mâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®[0m"),J.writeln("[1;32mâ”‚[0m [1;36mWelcome to ALS Interactive Shell[0m                        [1;32mâ”‚[0m"),J.writeln("[1;32mâ”‚[0m [90mLimited command set available for security[0m               [1;32mâ”‚[0m"),J.writeln("[1;32mâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯[0m"),J.writeln(""),window.addEventListener("resize",G),G(),setTimeout(G,1e3)}),I.addEventListener("message",e=>{_.push(e.data),$()}),I.addEventListener("close",e=>{z.value=!1,1e3===e.code?(D.value="Disconnected",J.writeln("\r\n[1;33mConnection closed normally[0m")):(D.value="Connection lost",J.writeln("\r\n[1;31mConnection lost unexpectedly[0m")),B("closed")}),I.addEventListener("error",e=>{D.value="Connection error",J.writeln("\r\n[1;31mWebSocket connection error[0m")}),J.onData(e=>{I&&I.readyState===WebSocket.OPEN&&I.send((new TextEncoder).encode("1"+e))})})()}),i(()=>{window.removeEventListener("resize",G),I&&I.close()}),(e,r)=>(c(),d("div",{ref_key:"containerRef",ref:A,class:"h-full flex flex-col bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-2xl"},[m("div",h,[r[1]||(r[1]=m("div",{class:"flex items-center space-x-2"},[m("div",{class:"w-3 h-3 bg-red-500 rounded-full"}),m("div",{class:"w-3 h-3 bg-yellow-500 rounded-full"}),m("div",{class:"w-3 h-3 bg-green-500 rounded-full"})],-1)),m("div",p,[f(u(t),{class:"w-4 h-4"}),r[0]||(r[0]=m("span",null,"Interactive Shell",-1))]),m("div",w,[m("div",{class:b(["w-2.5 h-2.5 rounded-full transition-colors",z.value?"bg-green-400":"bg-red-400"])},null,2),m("span",y,v(D.value),1)])]),m("div",x,[m("div",{ref_key:"terminalRef",ref:M,class:"absolute inset-0 p-2"},null,512),z.value?g("",!0):(c(),d("div",k,[m("div",S,[r[2]||(r[2]=m("div",{class:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"},null,-1)),m("p",C,v(D.value),1)])]))]),m("div",j,[m("div",E,[r[3]||(r[3]=m("span",null,"Limited shell environment â€¢ Type 'help' for available commands",-1)),z.value?(c(),d("span",L,v(u(J).rows)+"Ã—"+v(u(J).cols),1)):g("",!0)])])],512))}};export{W as default};
